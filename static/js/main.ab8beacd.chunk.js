(this["webpackJsonpcinema-app"]=this["webpackJsonpcinema-app"]||[]).push([[0],{18:function(e,t,a){},23:function(e,t,a){},26:function(e,t,a){e.exports=a.p+"static/media/loginImg.79dde563.png"},27:function(e,t,a){e.exports=a.p+"static/media/main.e4ce87c1.png"},29:function(e,t,a){e.exports=a.p+"static/media/newMovieImg.bb3bf03d.png"},30:function(e,t,a){e.exports=a.p+"static/media/editMovieImg.8827b264.png"},33:function(e,t,a){e.exports=a(50)},38:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),o=a(11),i=(a(38),a(3)),m=a(4),s=Object(n.createContext)(),u=function(e){var t=e.children,a=Object(n.useState)("pending"),c=Object(m.a)(a,2),l=c[0],o=c[1];return r.a.createElement(s.Provider,{value:{isAuth:l,setIsAuth:o}},t)},p=a(32),f=function(e){var t=e.component,a=Object(p.a)(e,["component"]),c=Object(n.useContext)(s).isAuth;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/"})}}))},E=(a(44),a(26)),b=a.n(E),d=a(2),v=a.n(d),h=a(6),g=a(15),N=(a(18),"https://zm-job-application.herokuapp.com"),j=function(e){return fetch("".concat(N,"/auth/local"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},w=function(e){return fetch("".concat(N,"/movies"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))},y=function(e,t,a){return fetch("".concat(N,"/movies/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(e)},body:a}).then((function(e){return e.json()}))},O=function(){var e=Object(g.a)(),t=e.register,a=e.handleSubmit,c=e.errors,l=Object(i.f)(),o=Object(n.useContext)(s).setIsAuth,m=function(){var e=Object(h.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t);case 3:(a=e.sent).jwt&&(localStorage.setItem("token",a.jwt),o(!0),w(localStorage.getItem("token")).then((function(e){e.length>0?l.push("/movieList"):l.push("/main")}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"form",onSubmit:a(m)},r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"identifier",className:"form-label"},"Email*"),r.a.createElement("input",{type:"text",name:"identifier",className:"form-input",ref:t({required:!0})}),c.identifier&&r.a.createElement("p",{className:"error"},"Email can not be empty")),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password*"),r.a.createElement("input",{type:"password",name:"password",className:"form-input",ref:t({required:!0})}),c.password&&r.a.createElement("p",{className:"error"},"Password can not be empty")),r.a.createElement("button",{className:"loginBtn"},"Sign in")))},C=(a(46),function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t))}),k=function(){return r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",null,r.a.createElement(C,null,"Login"),r.a.createElement(O,null)),r.a.createElement("figure",null,r.a.createElement("img",{src:b.a,alt:"Login"})))},S=(a(47),a(27)),x=a.n(S),I=function(){var e=Object(i.f)();return r.a.createElement("div",{className:"main-wrapper"},r.a.createElement("div",{className:"main-content"},r.a.createElement(C,null,"Your movie list is empty"),r.a.createElement("button",{className:"addBtn",onClick:function(){return e.push("/newMovie")}},"Create a new movie")),r.a.createElement("figure",null,r.a.createElement("img",{src:x.a,alt:"Main",className:"mainImg"})))},F=(a(23),a(12)),L=a(31),B=(a(48),{width:329,height:128,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:2,borderStyle:"dashed",borderColor:"#bcbcbc",borderRadius:5,marginTop:12,fontStyle:"normal",fontWeight:"normal",fontSize:18,lineHeight:23,color:"#8f8f8f",outline:"none",transition:"border .24s ease-in-out"}),M={borderColor:"#2196f3"},A={borderColor:"#00e676"},D={borderColor:"#ff1744"};var P=function(e){var t=e.files,a=e.setFiles,c=e.poster,l=Object(L.a)({accept:"image/*",noClick:!0,noKeyboard:!0,onDrop:function(e){a(e.map((function(e){return Object.assign(e,{poster:URL.createObjectURL(e)})})))}}),o=l.getRootProps,i=l.getInputProps,m=l.isDragActive,s=l.isDragAccept,u=l.isDragReject,p=Object(n.useMemo)((function(){return Object(F.a)(Object(F.a)(Object(F.a)(Object(F.a)({},B),m?M:{}),s?A:{}),u?D:{})}),[m,u]);Object(n.useEffect)((function(){return function(){t.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[t]);var f=t.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("img",{src:e.poster,className:"img",alt:"preview"}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"imageContainer"},t.length>0?f:c?r.a.createElement("img",{src:c.url,alt:"preview",className:"img"}):null),r.a.createElement("div",o({style:p}),r.a.createElement("input",i()),r.a.createElement("span",null,"Drop image here")))},T=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(g.a)(),o=l.register,s=l.handleSubmit,u=l.errors,p=Object(i.f)(),f=function(){var e=Object(h.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,r={title:t.title,year:t.year},n.append("data",JSON.stringify(r)),n.append("files.poster",a[0]),e.prev=4,e.next=7,c=localStorage.getItem("token"),l=n,fetch("".concat(N,"/movies"),{method:"POST",headers:{Authorization:"Bearer ".concat(c)},body:l}).then((function(e){return e.json()}));case 7:e.sent?p.push("/movieList"):console.log("Error!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}var c,l}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{className:"form",onSubmit:s(f)},r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"title",className:"form-label"},"Title*"),r.a.createElement("input",{type:"text",name:"title",className:"form-input",ref:o({required:!0})}),u.title&&r.a.createElement("p",{className:"error"},"Title can not be empty")),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"year",className:"form-label"},"Publication year"),r.a.createElement("input",{type:"text",name:"year",className:"form-input",ref:o})),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"poster",className:"form-label"},"Cover image*"),r.a.createElement(P,{files:a,setFiles:c})),r.a.createElement("div",{className:"buttonsRow"},r.a.createElement("button",{className:"cancelBtn",onClick:function(){return p.goBack()}},"Cancel"),r.a.createElement("button",{type:"submit",className:"submitBtn"},"Create"))))},R=a(29),z=a.n(R),U=function(){return r.a.createElement("div",{className:"newMovie-wrapper"},r.a.createElement(C,null,"Create a new movie"),r.a.createElement(T,null),r.a.createElement("figure",null,r.a.createElement("img",{src:z.a,alt:"Tree",className:"newMovieImg"})))},J=(a(49),function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(i.f)();Object(n.useEffect)((function(){w(localStorage.getItem("token")).then((function(e){c(e)}))}),[]);var o=function(e){var t,n;t=localStorage.getItem("token"),n=e,fetch("".concat(N,"/movies/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),c(a.filter((function(t){return t.id!==e})))};return r.a.createElement("div",{className:"movieList-wrapper"},r.a.createElement("div",{className:"movieList_header"},r.a.createElement(C,null,"Movies"),r.a.createElement("button",{className:"movieList_btnNew",onClick:function(){return l.push("/newMovie")}},"Add new",r.a.createElement("span",null,"+"))),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Cover image"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Publication year"),r.a.createElement("th",null,"Options"))),r.a.createElement("tbody",null,a&&a.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement("img",{src:e.poster.url,alt:"poster",className:"coverImg"})),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.year),r.a.createElement("td",{className:"options"},r.a.createElement("div",{className:"optionsContainer"},r.a.createElement("button",{className:"editBtn",onClick:function(){return function(e){l.push({pathname:"/editMovie",state:{movie:e}})}(e)}},"Edit"),r.a.createElement("button",{className:"deleteBtn",onClick:function(){return o(e.id)}},"Delete"))))})))))}),q=a(7),W=function(e){var t=e.movieData,a=t.id,c=t.title,l=t.year,o=t.poster,s=Object(n.useState)({title:"",year:""}),u=Object(m.a)(s,2),p=u[0],f=u[1],E=Object(n.useState)([]),b=Object(m.a)(E,2),d=b[0],N=b[1],j=Object(g.a)(),w=j.register,O=j.handleSubmit,C=j.errors,k=Object(i.f)();Object(n.useEffect)((function(){f({title:c,year:l})}),[]);var S=function(e){f(Object(F.a)(Object(F.a)({},p),{},Object(q.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(h.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,r={title:t.title,year:t.year},n.append("data",JSON.stringify(r)),n.append("files.poster",d[0]),e.prev=4,e.next=7,y(localStorage.getItem("token"),a,n);case 7:e.sent?k.push("/movieList"):console.log("Error!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{className:"form",onSubmit:O(x)},r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"title",className:"form-label"},"Title*"),r.a.createElement("input",{type:"text",name:"title",className:"form-input",value:p.title,onChange:S,ref:w({required:!0})}),C.title&&r.a.createElement("p",{className:"error"},"Title can not be empty")),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"year",className:"form-label"},"Publication year"),r.a.createElement("input",{type:"text",name:"year",className:"form-input",value:p.year,onChange:S,ref:w})),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"poster",className:"form-label"},"Cover image*"),r.a.createElement(P,{files:d,setFiles:N,poster:o})),r.a.createElement("div",{className:"buttonsRow"},r.a.createElement("button",{className:"cancelBtn",onClick:function(){return k.push("/movieList")}},"Cancel"),r.a.createElement("button",{type:"submit",className:"submitBtn"},"Update"))))},_=a(30),H=a.n(_),K=function(e){return r.a.createElement("div",{className:"newMovie-wrapper"},r.a.createElement(C,null,"Edit"),r.a.createElement(W,{movieData:e.location.state.movie}),r.a.createElement("figure",null,r.a.createElement("img",{src:H.a,alt:"Edit",className:"newMovieImg"})))},Y=function(){var e=Object(n.useContext)(s),t=e.isAuth,a=e.setIsAuth;return Object(n.useEffect)((function(){null!==localStorage.getItem("token")?a(!0):a(!1)}),[]),r.a.createElement(r.a.Fragment,null,!0===t||!1===t?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{exact:!0,path:"/zero-molecule-cinema",component:k}),r.a.createElement(f,{path:"/main",component:I}),r.a.createElement(f,{path:"/newMovie",component:U}),r.a.createElement(f,{path:"/movieList",component:J}),r.a.createElement(f,{path:"/editMovie",component:K})):null)};l.a.render(r.a.createElement(u,null,r.a.createElement(o.a,null,r.a.createElement(Y,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.ab8beacd.chunk.js.map